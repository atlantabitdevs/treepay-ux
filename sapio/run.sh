#!/bin/zsh
sapio-cli contract create --key=82ad5644f2100d589005efbb0c9c3a2d1d11de4f6051a399a342ab11bba2558a '{"arguments":{"TreePay":{"fee_sats_per_tx":0,"participants":[{"address":"tb1q3lu3alvgjjetffslfft77wex7fflagn9g07zf2","amount":0.8},{"address":"tb1qcrppe53d7z0gla2exjxemamzn6mk8qwyvkvqk6","amount":0.2},{"address":"tb1q4zkvslnpkjvg3gh0acdesunnhzfjkd24wdwcu6","amount":0.5},{"address":"tb1qshyzx6fxaks84r7e8u6xwnjvcvamgm9vnqyxq9","amount":0.5},{"address":"tb1qmjcwrx5jprh7wy3znk9hvp783njzuuvzmasvzc","amount":0.25},{"address":"tb1qq20zd4jp6xfa0zqr5d99htm4qu536zkepgmry5","amount":0.75},{"address":"tb1qze6ylt25su67jf4s6j7xyklpkyetykcxhl3cyl","amount":1},{"address":"tb1q8zlnkj9h9xd7653w6shz4u5wsh4uv8lw9ewnpa","amount":1.5},{"address":"tb1qf4fan8xrtxax9zpyz62px28le76lgs95jqmmsg","amount":0.5},{"address":"tb1qn92mc48c828jsatflfywzn226rnzjj7xpj7q5h","amount":1}],"radix":2,"timelock_backpressure":{"RH":1}}},"context":{"amount":8,"network":"Signet"}}';


sapio-cli contract bind --base64_psbt '{"template_hash_to_template_map":{"f83aba9d18dce742f06bf802515b14094bd65799fe81c307554ca75fbd64f504":{"additional_preconditions":[],"precomputed_template_hash":"f83aba9d18dce742f06bf802515b14094bd65799fe81c307554ca75fbd64f504","precomputed_template_hash_idx":0,"max_amount_sats":700000000,"min_feerate_sats_vbyte":null,"transaction_literal":{"version":2,"lock_time":0,"input":[{"previous_output":"0000000000000000000000000000000000000000000000000000000000000000:4294967295","script_sig":"","sequence":1,"witness":[]}],"output":[{"value":350000000,"script_pubkey":"5120884ae93271e1a3e99185f34042e552da149c702a9719f4658aae1f8bbbb833d0"},{"value":350000000,"script_pubkey":"5120835591275491a2db44f234bc985e649af382d465918b2ef5cfaab2530903c3ee"}]},"outputs_info":[{"sending_amount_sats":350000000,"receiving_contract":{"template_hash_to_template_map":{"929c68ef308b66717c0352d23c72353d1884f00c8d41da47bd4268bc898ab854":{"additional_preconditions":[],"precomputed_template_hash":"929c68ef308b66717c0352d23c72353d1884f00c8d41da47bd4268bc898ab854","precomputed_template_hash_idx":0,"max_amount_sats":350000000,"min_feerate_sats_vbyte":null,"transaction_literal":{"version":2,"lock_time":0,"input":[{"previous_output":"0000000000000000000000000000000000000000000000000000000000000000:4294967295","script_sig":"","sequence":1,"witness":[]}],"output":[{"value":100000000,"script_pubkey":"5120c383d477950ad42cb8bfba78a775594aa6302d6d35cabd0ba0167491b5dad227"},{"value":250000000,"script_pubkey":"5120d43af9589e6259feb5b5626476035c62fa7f0ad7c4315165f41e55cb0cc52b4b"}]},"outputs_info":[{"sending_amount_sats":100000000,"receiving_contract":{"template_hash_to_template_map":{"dfb0fb8b0613a82dac54b82891be68b8b82e1df782dc02c4fce3a6f9c3dbac75":{"additional_preconditions":[],"precomputed_template_hash":"dfb0fb8b0613a82dac54b82891be68b8b82e1df782dc02c4fce3a6f9c3dbac75","precomputed_template_hash_idx":0,"max_amount_sats":100000000,"min_feerate_sats_vbyte":null,"transaction_literal":{"version":2,"lock_time":0,"input":[{"previous_output":"0000000000000000000000000000000000000000000000000000000000000000:4294967295","script_sig":"","sequence":1,"witness":[]}],"output":[{"value":25000000,"script_pubkey":"0014dcb0e19a9208efe712229d8b7607c78ce42e7182"},{"value":75000000,"script_pubkey":"0014029e26d641d193d78803a34a5baf7507291d0ad9"}]},"outputs_info":[{"sending_amount_sats":25000000,"receiving_contract":{"root_path":"","address":"tb1qmjcwrx5jprh7wy3znk9hvp783njzuuvzmasvzc","amount_range":{"max_btc":0.25}}},{"sending_amount_sats":75000000,"receiving_contract":{"root_path":"","address":"tb1qq20zd4jp6xfa0zqr5d99htm4qu536zkepgmry5","amount_range":{"max_btc":0.75}}}]}},"root_path":"@root/@root/82ad5644f2100d589005efbb0c9c3a2d1d11de4f6051a399a342ab11bba2558a/@then_fn/@next/expand/#0/@then_fn/@next/expand/#0","address":"tb1pcwpagau4pt2zew9lhfu2wa2ef2nrqttdxh9t6zaqze6frdw66gns6tlw5f","known_descriptor":{"XOnly":"tr(72cd6e8422c407fb6d098690f1130b7ded7ec2f7f5e1d30bd9d521f015363793,t:txtmpl(dfb0fb8b0613a82dac54b82891be68b8b82e1df782dc02c4fce3a6f9c3dbac75))#64er583v"},"amount_range":{"max_btc":1.0}}},{"sending_amount_sats":250000000,"receiving_contract":{"template_hash_to_template_map":{"1553351585e1a0fbe46701695fe998fb9ddeae420959052e43e87ea6290eff76":{"additional_preconditions":[],"precomputed_template_hash":"1553351585e1a0fbe46701695fe998fb9ddeae420959052e43e87ea6290eff76","precomputed_template_hash_idx":0,"max_amount_sats":250000000,"min_feerate_sats_vbyte":null,"transaction_literal":{"version":2,"lock_time":0,"input":[{"previous_output":"0000000000000000000000000000000000000000000000000000000000000000:4294967295","script_sig":"","sequence":1,"witness":[]}],"output":[{"value":100000000,"script_pubkey":"001416744fad548735e926b0d4bc625be1b132b25b06"},{"value":150000000,"script_pubkey":"001438bf3b48b7299bed522ed42e2af28e85ebc61fee"}]},"outputs_info":[{"sending_amount_sats":100000000,"receiving_contract":{"root_path":"","address":"tb1qze6ylt25su67jf4s6j7xyklpkyetykcxhl3cyl","amount_range":{"max_btc":1.0}}},{"sending_amount_sats":150000000,"receiving_contract":{"root_path":"","address":"tb1q8zlnkj9h9xd7653w6shz4u5wsh4uv8lw9ewnpa","amount_range":{"max_btc":1.5}}}]}},"root_path":"@root/@root/82ad5644f2100d589005efbb0c9c3a2d1d11de4f6051a399a342ab11bba2558a/@then_fn/@next/expand/#0/@then_fn/@next/expand/#1","address":"tb1p6sa0jky7vfvladd4vfj8vq6uvta87zkhcsc4ze05re2ukrx99d9s487wxz","known_descriptor":{"XOnly":"tr(72cd6e8422c407fb6d098690f1130b7ded7ec2f7f5e1d30bd9d521f015363793,t:txtmpl(1553351585e1a0fbe46701695fe998fb9ddeae420959052e43e87ea6290eff76))#5a6y3fn9"},"amount_range":{"max_btc":2.5}}}]}},"root_path":"@root/@root/82ad5644f2100d589005efbb0c9c3a2d1d11de4f6051a399a342ab11bba2558a/@then_fn/@next/expand/#0","address":"tb1p3p9wjvn3ux37nyv97dqy9e2jmg2fcup2juvlgev24c0chwacx0gq4wrdp2","known_descriptor":{"XOnly":"tr(72cd6e8422c407fb6d098690f1130b7ded7ec2f7f5e1d30bd9d521f015363793,t:txtmpl(929c68ef308b66717c0352d23c72353d1884f00c8d41da47bd4268bc898ab854))#89h6a9se"},"amount_range":{"max_btc":3.5}}},{"sending_amount_sats":350000000,"receiving_contract":{"template_hash_to_template_map":{"fd7f85fb98bda8ad023656c027c7f5b97e3edbac4e55da9175ec6d0283245f98":{"additional_preconditions":[],"precomputed_template_hash":"fd7f85fb98bda8ad023656c027c7f5b97e3edbac4e55da9175ec6d0283245f98","precomputed_template_hash_idx":0,"max_amount_sats":350000000,"min_feerate_sats_vbyte":null,"transaction_literal":{"version":2,"lock_time":0,"input":[{"previous_output":"0000000000000000000000000000000000000000000000000000000000000000:4294967295","script_sig":"","sequence":1,"witness":[]}],"output":[{"value":150000000,"script_pubkey":"51202f943af9b545e91ba2334be02967b5be1400ab4d7e769eadaf091fc8d8474186"},{"value":200000000,"script_pubkey":"51200883b6db4289c938cf51c74c3f786cfed0f6bb6fff7cc4dee76412fb854a7403"}]},"outputs_info":[{"sending_amount_sats":150000000,"receiving_contract":{"template_hash_to_template_map":{"c8602e8b17035db73642ad5ec541508f411c982d8a7d15090914d64237ba6b60":{"additional_preconditions":[],"precomputed_template_hash":"c8602e8b17035db73642ad5ec541508f411c982d8a7d15090914d64237ba6b60","precomputed_template_hash_idx":0,"max_amount_sats":150000000,"min_feerate_sats_vbyte":null,"transaction_literal":{"version":2,"lock_time":0,"input":[{"previous_output":"0000000000000000000000000000000000000000000000000000000000000000:4294967295","script_sig":"","sequence":1,"witness":[]}],"output":[{"value":50000000,"script_pubkey":"00144d53d99cc359ba62882416941328ffcfb5f440b4"},{"value":100000000,"script_pubkey":"00149955bc54f83a8f287569fa48e14d4ad0e6294bc6"}]},"outputs_info":[{"sending_amount_sats":50000000,"receiving_contract":{"root_path":"","address":"tb1qf4fan8xrtxax9zpyz62px28le76lgs95jqmmsg","amount_range":{"max_btc":0.5}}},{"sending_amount_sats":100000000,"receiving_contract":{"root_path":"","address":"tb1qn92mc48c828jsatflfywzn226rnzjj7xpj7q5h","amount_range":{"max_btc":1.0}}}]}},"root_path":"@root/@root/82ad5644f2100d589005efbb0c9c3a2d1d11de4f6051a399a342ab11bba2558a/@then_fn/@next/expand/#1/@then_fn/@next/expand/#0","address":"tb1p972r47d4gh53hg3nf0szjea4hc2qp26d0emfatd0py0u3kz8gxrqq9fy0u","known_descriptor":{"XOnly":"tr(72cd6e8422c407fb6d098690f1130b7ded7ec2f7f5e1d30bd9d521f015363793,t:txtmpl(c8602e8b17035db73642ad5ec541508f411c982d8a7d15090914d64237ba6b60))#g806pxhz"},"amount_range":{"max_btc":1.5}}},{"sending_amount_sats":200000000,"receiving_contract":{"template_hash_to_template_map":{"432795916a94f220bc880d91bdb3a4394236da803f3296526546785ec0761ebc":{"additional_preconditions":[],"precomputed_template_hash":"432795916a94f220bc880d91bdb3a4394236da803f3296526546785ec0761ebc","precomputed_template_hash_idx":0,"max_amount_sats":200000000,"min_feerate_sats_vbyte":null,"transaction_literal":{"version":2,"lock_time":0,"input":[{"previous_output":"0000000000000000000000000000000000000000000000000000000000000000:4294967295","script_sig":"","sequence":1,"witness":[]}],"output":[{"value":100000000,"script_pubkey":"512028fc61e584bd03141164a08de74dac8b98a467e6aadb99cd549fa34ba0d8be9d"},{"value":100000000,"script_pubkey":"51208cc9fc9ba32fa95ee8f1e5dd42b5de35975979ae6113886c1de329648fe20bde"}]},"outputs_info":[{"sending_amount_sats":100000000,"receiving_contract":{"template_hash_to_template_map":{"1c1f55b957a47db583b95d849b10796096fb0d2da7900bb79f6efa4fcf467aeb":{"additional_preconditions":[],"precomputed_template_hash":"1c1f55b957a47db583b95d849b10796096fb0d2da7900bb79f6efa4fcf467aeb","precomputed_template_hash_idx":0,"max_amount_sats":100000000,"min_feerate_sats_vbyte":null,"transaction_literal":{"version":2,"lock_time":0,"input":[{"previous_output":"0000000000000000000000000000000000000000000000000000000000000000:4294967295","script_sig":"","sequence":1,"witness":[]}],"output":[{"value":80000000,"script_pubkey":"00148ff91efd8894b2b4a61f4a57ef3b26f253fea265"},{"value":20000000,"script_pubkey":"0014c0c21cd22df09e8ff559348d9df7629eb76381c4"}]},"outputs_info":[{"sending_amount_sats":80000000,"receiving_contract":{"root_path":"","address":"tb1q3lu3alvgjjetffslfft77wex7fflagn9g07zf2","amount_range":{"max_btc":0.8}}},{"sending_amount_sats":20000000,"receiving_contract":{"root_path":"","address":"tb1qcrppe53d7z0gla2exjxemamzn6mk8qwyvkvqk6","amount_range":{"max_btc":0.2}}}]}},"root_path":"@root/@root/82ad5644f2100d589005efbb0c9c3a2d1d11de4f6051a399a342ab11bba2558a/@then_fn/@next/expand/#1/@then_fn/@next/expand/#1/@then_fn/@next/expand/#0","address":"tb1p9r7xrevyh5p3gyty5zx7wndv3wv2gelx4tdenn25n735hgxch6wsn6lgx0","known_descriptor":{"XOnly":"tr(72cd6e8422c407fb6d098690f1130b7ded7ec2f7f5e1d30bd9d521f015363793,t:txtmpl(1c1f55b957a47db583b95d849b10796096fb0d2da7900bb79f6efa4fcf467aeb))#peu2v49h"},"amount_range":{"max_btc":1.0}}},{"sending_amount_sats":100000000,"receiving_contract":{"template_hash_to_template_map":{"b37f3e5a190d19baba89feda12c2c58b32a5be9b3b72254a7b58af7245ce16bb":{"additional_preconditions":[],"precomputed_template_hash":"b37f3e5a190d19baba89feda12c2c58b32a5be9b3b72254a7b58af7245ce16bb","precomputed_template_hash_idx":0,"max_amount_sats":100000000,"min_feerate_sats_vbyte":null,"transaction_literal":{"version":2,"lock_time":0,"input":[{"previous_output":"0000000000000000000000000000000000000000000000000000000000000000:4294967295","script_sig":"","sequence":1,"witness":[]}],"output":[{"value":50000000,"script_pubkey":"0014a8acc87e61b49888a2efee1b987273b8932b3555"},{"value":50000000,"script_pubkey":"001485c8236926eda07a8fd93f34674e4cc33bb46cac"}]},"outputs_info":[{"sending_amount_sats":50000000,"receiving_contract":{"root_path":"","address":"tb1q4zkvslnpkjvg3gh0acdesunnhzfjkd24wdwcu6","amount_range":{"max_btc":0.5}}},{"sending_amount_sats":50000000,"receiving_contract":{"root_path":"","address":"tb1qshyzx6fxaks84r7e8u6xwnjvcvamgm9vnqyxq9","amount_range":{"max_btc":0.5}}}]}},"root_path":"@root/@root/82ad5644f2100d589005efbb0c9c3a2d1d11de4f6051a399a342ab11bba2558a/@then_fn/@next/expand/#1/@then_fn/@next/expand/#1/@then_fn/@next/expand/#1","address":"tb1p3nylexar9754a683uhw59dw7xkt4j7dwvyfcsmqauv5kfrlzp00qf7tkms","known_descriptor":{"XOnly":"tr(72cd6e8422c407fb6d098690f1130b7ded7ec2f7f5e1d30bd9d521f015363793,t:txtmpl(b37f3e5a190d19baba89feda12c2c58b32a5be9b3b72254a7b58af7245ce16bb))#dxxfmyqd"},"amount_range":{"max_btc":1.0}}}]}},"root_path":"@root/@root/82ad5644f2100d589005efbb0c9c3a2d1d11de4f6051a399a342ab11bba2558a/@then_fn/@next/expand/#1/@then_fn/@next/expand/#1","address":"tb1ppzpmdk6z38yn3n63caxr77rvlmg0dwm0la7vfhh8vsf0hp22wspsz59789","known_descriptor":{"XOnly":"tr(72cd6e8422c407fb6d098690f1130b7ded7ec2f7f5e1d30bd9d521f015363793,t:txtmpl(432795916a94f220bc880d91bdb3a4394236da803f3296526546785ec0761ebc))#z3276y0w"},"amount_range":{"max_btc":2.0}}}]}},"root_path":"@root/@root/82ad5644f2100d589005efbb0c9c3a2d1d11de4f6051a399a342ab11bba2558a/@then_fn/@next/expand/#1","address":"tb1psd2ezf65jx3dk38jxj7fshnyntec94r9jx9jaaw042e9xzgrc0hqzxse7t","known_descriptor":{"XOnly":"tr(72cd6e8422c407fb6d098690f1130b7ded7ec2f7f5e1d30bd9d521f015363793,t:txtmpl(fd7f85fb98bda8ad023656c027c7f5b97e3edbac4e55da9175ec6d0283245f98))#hdfjj7zl"},"amount_range":{"max_btc":3.5}}}]}},"root_path":"@root/@root/82ad5644f2100d589005efbb0c9c3a2d1d11de4f6051a399a342ab11bba2558a","address":"tb1ph9adhe2nwhtgzdr9ykkhwrq5gxh33up5fnqsfgv4nlxjxw6n4rdq9vnk20","known_descriptor":{"XOnly":"tr(72cd6e8422c407fb6d098690f1130b7ded7ec2f7f5e1d30bd9d521f015363793,t:txtmpl(f83aba9d18dce742f06bf802515b14094bd65799fe81c307554ca75fbd64f504))#s8ysgpga"},"amount_range":{"max_btc":7.0}}';
